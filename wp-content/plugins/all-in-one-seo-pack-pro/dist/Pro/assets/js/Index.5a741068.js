/* empty css             */import{g as W,r as x}from"./params.597cd0f5.js";import{d as X}from"./WpTable.43babaf5.js";import{_ as H}from"./default-i18n.0e8bc810.js";import"./constants.d64d7051.js";import{_ as b,q as d,o as n,c,a as s,z as l,j as p,b as _,C as $,F as w,E as S,t as r,B as P,k as f,x as y,l as G,m as E,T as z}from"./_plugin-vue_export-helper.299eda55.js";import"./index.c7acbe5b.js";import{S as J}from"./SaveChanges.176fcae6.js";import{b as L,c as q,m as D,a as Q,d as j}from"./vuex.esm-bundler.f966fce5.js";import{C as Z,G as tt}from"./Header.4ac759cb.js";import{S as V,d as et,B as st,a as R,c as F}from"./Caret.e5d23aaa.js";import{C as it,a as ot}from"./LicenseKeyBar.da2d6dc1.js";import{S as nt}from"./LogoGear.5137790f.js";import{S as at}from"./Logo.51893f13.js";import{S as rt}from"./Support.7b7ed4cd.js";import{C as ct}from"./Tabs.64ef3302.js";import{D as lt}from"./Date.9aee099c.js";import{S as dt}from"./Exclamation.cc5a264f.js";import{U as ut}from"./Url.c71d5763.js";import{S as _t}from"./Gear.3ba8042b.js";import{T as M}from"./Slide.46d23bfb.js";const O="all-in-one-seo-pack",ht=()=>({strings:{notifications:H("Notifications",O),newNotifications:H("New Notifications",O),activeNotifications:H("Active Notifications",O)}});const ft={components:{SvgAioseoLogoGear:nt,SvgClose:V},data(){return{strings:{boldText:this.$t.sprintf("<strong>%1$s %2$s</strong>","All in One SEO",this.$t.__("Free",this.$td)),url:this.$links.utmUrl("lite-upgrade-bar"),linkText:this.$t.sprintf(this.$t.__("upgrading to %1$s",this.$td),"Pro")}}},computed:{link(){return this.$t.sprintf('<strong><a href="%1$s" target="_blank" class="text-white">%2$s</a> <a href="%1$s" target="_blank" class="text-white upgrade-arrow">&rarr;</a></strong>',this.strings.url,this.strings.linkText)},upgradeText(){return this.$t.sprintf(this.$t.__("You're using %1$s. To unlock more features, consider %2$s",this.$td),this.strings.boldText,this.link)}},methods:{...L(["hideUpgradeBar"]),processHideUpgradeBar(){document.body.classList.remove("aioseo-has-bar"),this.hideUpgradeBar()}},mounted(){document.body.classList.add("aioseo-has-bar")}},mt={class:"aioseo-upgrade-bar"},pt={class:"upgrade-text"},gt=["innerHTML"];function vt(t,e,a,g,i,o){const u=d("svg-aioseo-logo-gear"),m=d("svg-close");return n(),c("div",mt,[s("div",pt,[l(u),s("div",{innerHTML:o.upgradeText},null,8,gt)]),l(m,{onClick:o.processHideUpgradeBar},null,8,["onClick"])])}const yt=b(ft,[["render",vt]]),$t={},bt={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-description"},kt=s("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Nt=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z",fill:"currentColor"},null,-1),wt=[kt,Nt];function Ct(t,e){return n(),c("svg",bt,wt)}const St=b($t,[["render",Ct]]),Dt={},Lt={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-folder-open"},Tt=s("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),At=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z",fill:"currentColor"},null,-1),Bt=[Tt,At];function Pt(t,e){return n(),c("svg",Lt,Bt)}const Mt=b(Dt,[["render",Pt]]);const It={components:{CoreApiBar:it,CoreLicenseKeyBar:ot,CoreUpgradeBar:yt,SvgAioseoLogo:at,SvgClose:V,SvgDescription:St,SvgFolderOpen:Mt,SvgSupport:rt},data(){return{searchItem:null,strings:{close:this.$t.__("Close",this.$td),search:this.$t.__("Search",this.$td),viewAll:this.$t.__("View All",this.$td),docs:this.$t.__("Docs",this.$td),viewDocumentation:this.$t.__("View Documentation",this.$td),browseDocumentation:this.$t.sprintf(this.$t.__("Browse documentation, reference material, and tutorials for %1$s.",this.$td),"AIOSEO"),viewAllDocumentation:this.$t.__("View All Documentation",this.$td),getSupport:this.$t.__("Get Support",this.$td),submitTicket:this.$t.__("Submit a ticket and our world class support team will be in touch soon.",this.$td),submitSupportTicket:this.$t.__("Submit a Support Ticket",this.$td),upgradeToPro:this.$t.__("Upgrade to Pro",this.$td)}}},computed:{...q(["settings","isUnlicensed"]),...D(["showHelpModal","helpPanel","pong"]),filteredDocs(){return this.searchItem!==""?Object.values(this.helpPanel.docs).filter(t=>this.searchItem!==null?t.title.toLowerCase().includes(this.searchItem.toLowerCase()):null):null}},methods:{inputSearch:function(t){et(()=>{this.searchItem=t},1e3)},toggleSection:function(t){t.target.parentNode.parentNode.classList.toggle("opened")},toggleDocs:function(t){t.target.previousSibling.classList.toggle("opened"),t.target.style.display="none"},toggleModal(){document.getElementById("aioseo-help-modal").classList.toggle("visible"),document.body.classList.toggle("modal-open")},getCategoryDocs(t){return Object.values(this.helpPanel.docs).filter(e=>e.categories.flat().includes(t)?e:null)}}},Ut={id:"aioseo-help-modal",class:"aioseo-help"},Ht={class:"aioseo-help-header"},Ot={class:"logo"},Et=["href"],zt=["title"],qt={class:"help-content"},Vt={id:"aioseo-help-search"},Rt={id:"aioseo-help-result"},Gt={class:"aioseo-help-docs"},jt={class:"icon"},Ft=["href"],Yt={id:"aioseo-help-categories"},Kt={class:"aioseo-help-categories-toggle"},Wt={class:"folder-open"},xt={class:"title"},Xt=s("span",{class:"dashicons dashicons-arrow-right-alt2"},null,-1),Jt={class:"aioseo-help-docs"},Qt={class:"icon"},Zt=["href"],te={class:"aioseo-help-additional-docs"},ee={class:"icon"},se=["href"],ie={id:"aioseo-help-footer"},oe={class:"aioseo-help-footer-block"},ne=["href"],ae={class:"aioseo-help-footer-block"},re=["href"];function ce(t,e,a,g,i,o){const u=d("core-upgrade-bar"),m=d("core-license-key-bar"),h=d("core-api-bar"),v=d("svg-aioseo-logo"),T=d("svg-close"),I=d("base-input"),A=d("svg-description"),Y=d("svg-folder-open"),B=d("base-button"),K=d("svg-support");return n(),c("div",Ut,[!t.$isPro&&t.settings.showUpgradeBar&&t.pong?(n(),p(u,{key:0})):_("",!0),t.$isPro&&t.isUnlicensed&&t.pong?(n(),p(m,{key:1})):_("",!0),t.pong?_("",!0):(n(),p(h,{key:2})),s("div",Ht,[s("div",Ot,[t.isUnlicensed?(n(),c("a",{key:0,href:t.$links.utmUrl("header-logo"),target:"_blank"},[l(v,{id:"aioseo-help-logo"})],8,Et)):_("",!0),t.isUnlicensed?_("",!0):(n(),p(v,{key:1,id:"aioseo-help-logo"}))]),s("div",{id:"aioseo-help-close",title:i.strings.close,onClick:e[0]||(e[0]=$((...k)=>o.toggleModal&&o.toggleModal(...k),["stop"]))},[l(T)],8,zt)]),s("div",qt,[s("div",Vt,[l(I,{type:"text",size:"medium",placeholder:i.strings.search,"onUpdate:modelValue":e[1]||(e[1]=k=>o.inputSearch(k))},null,8,["placeholder"])]),s("div",Rt,[s("ul",Gt,[(n(!0),c(w,null,S(o.filteredDocs,(k,C)=>(n(),c("li",{key:C},[s("span",jt,[l(A)]),s("a",{href:t.$links.utmUrl("help-panel-doc","",k.url),rel:"noopener noreferrer",target:"_blank"},r(k.title),9,Ft)]))),128))])]),s("div",Yt,[s("ul",Kt,[(n(!0),c(w,null,S(t.helpPanel.categories,(k,C)=>(n(),c("li",{key:C,class:P(["aioseo-help-category",{opened:C==="getting-started"}])},[s("header",{onClick:e[2]||(e[2]=$(N=>o.toggleSection(N),["stop"]))},[s("span",Wt,[l(Y)]),s("span",xt,r(k),1),Xt]),s("ul",Jt,[(n(!0),c(w,null,S(o.getCategoryDocs(C).slice(0,5),(N,U)=>(n(),c("li",{key:U},[s("span",Qt,[l(A)]),s("a",{href:t.$links.utmUrl("help-panel-doc","",N.url),rel:"noopener noreferrer",target:"_blank"},r(N.title),9,Zt)]))),128)),s("div",te,[(n(!0),c(w,null,S(o.getCategoryDocs(C).slice(5,o.getCategoryDocs(C).length),(N,U)=>(n(),c("li",{key:U},[s("span",ee,[l(A)]),s("a",{href:t.$links.utmUrl("help-panel-doc","",N.url),rel:"noopener noreferrer",target:"_blank"},r(N.title),9,se)]))),128))]),o.getCategoryDocs(C).length>=5?(n(),p(B,{key:0,class:"aioseo-help-docs-viewall gray medium",onClick:e[3]||(e[3]=$(N=>o.toggleDocs(N),["stop"]))},{default:f(()=>[y(r(i.strings.viewAll)+" "+r(k)+" "+r(i.strings.docs),1)]),_:2},1024)):_("",!0)])],2))),128))])]),s("div",ie,[s("div",oe,[s("a",{href:t.$links.utmUrl("help-panel-all-docs","","https://aioseo.com/docs/"),rel:"noopener noreferrer",target:"_blank"},[l(A),s("h3",null,r(i.strings.viewDocumentation),1),s("p",null,r(i.strings.browseDocumentation),1),l(B,{class:"aioseo-help-docs-viewall gray small"},{default:f(()=>[y(r(i.strings.viewAllDocumentation),1)]),_:1})],8,ne)]),s("div",ae,[s("a",{href:!t.$isPro||!t.$aioseo.license.isActive?t.$links.getUpsellUrl("help-panel","get-support","liteUpgrade"):"https://aioseo.com/account/support/",rel:"noopener noreferrer",target:"_blank"},[l(K),s("h3",null,r(i.strings.getSupport),1),s("p",null,r(i.strings.submitTicket),1),t.$isPro&&t.$aioseo.license.isActive?(n(),p(B,{key:0,class:"aioseo-help-docs-support blue small"},{default:f(()=>[y(r(i.strings.submitSupportTicket),1)]),_:1})):_("",!0),!t.$isPro||!t.$aioseo.license.isActive?(n(),p(B,{key:1,class:"aioseo-help-docs-support green small"},{default:f(()=>[y(r(i.strings.upgradeToPro),1)]),_:1})):_("",!0)],8,re)])])])])}const le=b(It,[["render",ce]]),de=""+window.__aioseoDynamicImportPreload__("images/dannie-detective.f19b97eb.png");const ue={emits:["dismiss-notification"],components:{BaseButton:st,SvgCircleCheck:R,SvgCircleClose:F,SvgCircleExclamation:dt,SvgGear:_t,TransitionSlide:M},mixins:[ut,lt],props:{notification:{type:Object,required:!0}},data(){return{active:!0,strings:{dismiss:this.$t.__("Dismiss",this.$td)}}},computed:{getIcon(){switch(this.notification.type){case"warning":return"svg-circle-exclamation";case"error":return"svg-circle-close";case"info":return"svg-gear";case"success":default:return"svg-circle-check"}},getDate(){return this.dateSqlToLocalRelative(this.notification.start)}},methods:{...L(["dismissNotifications","processButtonAction"]),processDismissNotification(){this.active=!1,this.dismissNotifications([this.notification.slug]),this.$emit("dismissed-notification")}}},_e={class:"icon"},he={class:"body"},fe={class:"title"},me={class:"date"},pe=["innerHTML"],ge={class:"actions"};function ve(t,e,a,g,i,o){const u=d("base-button"),m=d("transition-slide");return n(),p(m,{class:"aioseo-notification",active:i.active},{default:f(()=>[s("div",null,[s("div",_e,[(n(),p(G(o.getIcon),{class:P(a.notification.type)},null,8,["class"]))]),s("div",he,[s("div",fe,[s("div",null,r(a.notification.title),1),s("div",me,r(o.getDate),1)]),s("div",{class:"notification-content",innerHTML:a.notification.content},null,8,pe),s("div",ge,[a.notification.button1_label&&a.notification.button1_action?(n(),p(u,{key:0,size:"small",type:"gray",tag:t.getTagType(a.notification.button1_action),href:t.getHref(a.notification.button1_action),target:t.getTarget(a.notification.button1_action),onClick:e[0]||(e[0]=h=>t.processButtonClick(a.notification.button1_action,1)),loading:t.button1Loading},{default:f(()=>[y(r(a.notification.button1_label),1)]),_:1},8,["tag","href","target","loading"])):_("",!0),a.notification.button2_label&&a.notification.button2_action?(n(),p(u,{key:1,size:"small",type:"gray",tag:t.getTagType(a.notification.button2_action),href:t.getHref(a.notification.button2_action),target:t.getTarget(a.notification.button2_action),onClick:e[1]||(e[1]=h=>t.processButtonClick(a.notification.button2_action,2)),loading:t.button2Loading},{default:f(()=>[y(r(a.notification.button2_label),1)]),_:1},8,["tag","href","target","loading"])):_("",!0),a.notification.dismissed?_("",!0):(n(),c("a",{key:2,href:"#",class:"dismiss",onClick:e[2]||(e[2]=$((...h)=>o.processDismissNotification&&o.processDismissNotification(...h),["stop","prevent"]))},r(i.strings.dismiss),1))])])])]),_:1},8,["active"])}const ye=b(ue,[["render",ve]]);const $e={emits:["dismissed-notification"],components:{SvgCircleCheck:R,TransitionSlide:M},props:{notification:{type:Object,required:!0}},data(){return{step:1,active:!0,strings:{dismiss:this.$t.__("Dismiss",this.$td),yesILoveIt:this.$t.__("Yes, I love it!",this.$td),notReally:this.$t.__("Not Really...",this.$td),okYouDeserveIt:this.$t.__("Ok, you deserve it",this.$td),nopeMaybeLater:this.$t.__("Nope, maybe later",this.$td),giveFeedback:this.$t.__("Give feedback",this.$td),noThanks:this.$t.__("No thanks",this.$td)}}},computed:{...D(["options"]),...q(["licenseKey"]),title(){switch(this.step){case 2:return this.$t.__("That's Awesome!",this.$td);case 3:return this.$t.__("Help us improve",this.$td);default:return this.$t.sprintf(this.$t.__("Are you enjoying %1$s?",this.$td),"AIOSEO")}},content(){switch(this.step){case 2:return this.$t.__("Could you please do me a BIG favor and give it a 5-star rating on WordPress to help us spread the word and boost our motivation?",this.$td)+"<br><br><strong>~ Syed Balkhi<br>"+this.$t.sprintf(this.$t.__("CEO of %1$s",this.$td),"All in One SEO")+"</strong>";case 3:return this.$t.sprintf(this.$t.__("We're sorry to hear you aren't enjoying %1$s. We would love a chance to improve. Could you take a minute and let us know what we can do better?",this.$td),"All in One SEO");default:return""}},feedbackUrl(){const t=this.options.general&&this.licenseKey?this.licenseKey:"",e=this.$isPro?"pro":"lite";return this.$links.utmUrl("notification-review-notice",this.$aioseo.version,"https://aioseo.com/plugin-feedback/?wpf7528_24="+encodeURIComponent(this.$aioseo.urls.home)+"&wpf7528_26="+t+"&wpf7528_27="+e+"&wpf7528_28="+this.$aioseo.version)}},methods:{...L(["dismissNotifications","processButtonAction"]),processDismissNotification(t=!1){this.active=!1,this.dismissNotifications([this.notification.slug+(t?"-delay":"")]),this.$emit("dismissed-notification")}}},be={class:"icon"},ke={class:"body"},Ne={class:"title"},we=["innerHTML"],Ce={class:"actions"};function Se(t,e,a,g,i,o){const u=d("svg-circle-check"),m=d("base-button"),h=d("transition-slide");return n(),p(h,{class:"aioseo-notification",active:i.active},{default:f(()=>[s("div",null,[s("div",be,[l(u,{class:"success"})]),s("div",ke,[s("div",Ne,[s("div",null,r(o.title),1)]),s("div",{class:"notification-content",innerHTML:o.content},null,8,we),s("div",Ce,[i.step===1?(n(),c(w,{key:0},[l(m,{size:"small",type:"blue",onClick:e[0]||(e[0]=$(v=>i.step=2,["stop"]))},{default:f(()=>[y(r(i.strings.yesILoveIt),1)]),_:1}),l(m,{size:"small",type:"gray",onClick:e[1]||(e[1]=$(v=>i.step=3,["stop"]))},{default:f(()=>[y(r(i.strings.notReally),1)]),_:1})],64)):_("",!0),i.step===2?(n(),c(w,{key:1},[l(m,{tag:"a",href:"https://wordpress.org/support/plugin/all-in-one-seo-pack/reviews/?filter=5#new-post",size:"small",type:"blue",target:"_blank",rel:"noopener noreferrer",onClick:e[2]||(e[2]=v=>o.processDismissNotification(!1))},{default:f(()=>[y(r(i.strings.okYouDeserveIt),1)]),_:1}),l(m,{size:"small",type:"gray",onClick:e[3]||(e[3]=$(v=>o.processDismissNotification(!0),["stop","prevent"]))},{default:f(()=>[y(r(i.strings.nopeMaybeLater),1)]),_:1})],64)):_("",!0),i.step===3?(n(),c(w,{key:2},[l(m,{tag:"a",href:o.feedbackUrl,size:"small",type:"blue",target:"_blank",rel:"noopener noreferrer",onClick:e[4]||(e[4]=v=>o.processDismissNotification(!1))},{default:f(()=>[y(r(i.strings.giveFeedback),1)]),_:1},8,["href"]),l(m,{size:"small",type:"gray",onClick:e[5]||(e[5]=$(v=>o.processDismissNotification(!1),["stop","prevent"]))},{default:f(()=>[y(r(i.strings.noThanks),1)]),_:1})],64)):_("",!0),a.notification.dismissed?_("",!0):(n(),c("a",{key:3,class:"dismiss",href:"#",onClick:e[6]||(e[6]=$(v=>o.processDismissNotification(!1),["stop","prevent"]))},r(i.strings.dismiss),1))])])])]),_:1},8,["active"])}const De=b($e,[["render",Se]]);const Le={emits:["dismissed-notification"],components:{SvgCircleCheck:R,TransitionSlide:M},props:{notification:{type:Object,required:!0}},data(){return{active:!0,strings:{dismiss:this.$t.__("Dismiss",this.$td),yesILoveIt:this.$t.__("Yes, I love it!",this.$td),notReally:this.$t.__("Not Really...",this.$td),okYouDeserveIt:this.$t.__("Ok, you deserve it",this.$td),nopeMaybeLater:this.$t.__("Nope, maybe later",this.$td),giveFeedback:this.$t.__("Give feedback",this.$td),noThanks:this.$t.__("No thanks",this.$td)}}},computed:{...D(["options"]),title(){return this.$t.sprintf(this.$t.__("Are you enjoying %1$s?",this.$td),"AIOSEO")},content(){return this.$t.sprintf(this.$t.__("Hey, I noticed you have been using %1$s for some time - that’s awesome! Could you please do me a BIG favor and give it a 5-star rating on WordPress to help us spread the word and boost our motivation?",this.$td),"<strong>All in One SEO</strong>")+"<br><br><strong>~ Syed Balkhi<br>"+this.$t.sprintf(this.$t.__("CEO of %1$s",this.$td),"All in One SEO")+"</strong>"}},methods:{...L(["dismissNotifications","processButtonAction"]),processDismissNotification(t=!1){this.active=!1,this.dismissNotifications([this.notification.slug+(t?"-delay":"")]),this.$emit("dismissed-notification")}}},Te={class:"icon"},Ae={class:"body"},Be={class:"title"},Pe=["innerHTML"],Me={class:"actions"};function Ie(t,e,a,g,i,o){const u=d("svg-circle-check"),m=d("base-button"),h=d("transition-slide");return n(),p(h,{class:"aioseo-notification",active:i.active},{default:f(()=>[s("div",null,[s("div",Te,[l(u,{class:"success"})]),s("div",Ae,[s("div",Be,[s("div",null,r(o.title),1)]),s("div",{class:"notification-content",innerHTML:o.content},null,8,Pe),s("div",Me,[l(m,{tag:"a",href:"https://wordpress.org/support/plugin/all-in-one-seo-pack/reviews/?filter=5#new-post",size:"small",type:"blue",target:"_blank",rel:"noopener noreferrer",onClick:e[0]||(e[0]=v=>o.processDismissNotification(!1))},{default:f(()=>[y(r(i.strings.okYouDeserveIt),1)]),_:1}),l(m,{size:"small",type:"gray",onClick:e[1]||(e[1]=$(v=>o.processDismissNotification(!0),["stop","prevent"]))},{default:f(()=>[y(r(i.strings.nopeMaybeLater),1)]),_:1}),a.notification.dismissed?_("",!0):(n(),c("a",{key:0,class:"dismiss",href:"#",onClick:e[2]||(e[2]=$(v=>o.processDismissNotification(!1),["stop","prevent"]))},r(i.strings.dismiss),1))])])])]),_:1},8,["active"])}const Ue=b(Le,[["render",Ie]]);const He={components:{SvgCircleClose:F,TransitionSlide:M},props:{notification:{type:Object,required:!0}},data(){return{active:!0,strings:{title:this.$t.sprintf(this.$t.__("%1$s Addons Not Configured Properly",this.$td),"AIOSEO"),learnMore:this.$t.__("Learn More",this.$td),upgrade:this.$t.__("Upgrade",this.$td)}}},computed:{...D(["options"]),content(){let t="<ul>";return this.notification.addons.forEach(e=>{t+="<li><strong>AIOSEO - "+e.name+"</strong></li>"}),t+="</ul>",this.notification.message+t}}},Oe={class:"icon"},Ee={class:"body"},ze={class:"title"},qe=["innerHTML"],Ve={class:"actions"};function Re(t,e,a,g,i,o){const u=d("svg-circle-close"),m=d("base-button"),h=d("transition-slide");return n(),p(h,{class:"aioseo-notification",active:i.active},{default:f(()=>[s("div",null,[s("div",Oe,[l(u,{class:"error"})]),s("div",Ee,[s("div",ze,[s("div",null,r(i.strings.title),1)]),s("div",{class:"notification-content",innerHTML:o.content},null,8,qe),s("div",Ve,[l(m,{size:"small",type:"green",tag:"a",href:t.$links.utmUrl("notification-unlicensed-addons"),target:"_blank"},{default:f(()=>[y(r(i.strings.upgrade),1)]),_:1},8,["href"])])])])]),_:1},8,["active"])}const Ge=b(He,[["render",Re]]);const je={emits:["toggle-dismissed","dismissed-notification"],components:{CoreNotification:ye,NotificationsReview:De,NotificationsReview2:Ue,NotificationsUnlicensedAddons:Ge},props:{dismissedCount:{type:Number,required:!0},notifications:{type:Array,required:!0}},data(){return{dannieDetectiveImg:de,strings:{greatScott:this.$t.__("Great Scott! Where'd they all go?",this.$td),noNewNotifications:this.$t.__("You have no new notifications.",this.$td),seeDismissed:this.$t.__("See Dismissed Notifications",this.$td)}}}},Fe={class:"aioseo-notification-cards"},Ye={key:"no-notifications"},Ke={class:"no-notifications"},We=["src"],xe={class:"great-scott"},Xe={class:"no-new-notifications"};function Je(t,e,a,g,i,o){return n(),c("div",Fe,[a.notifications.length?(n(!0),c(w,{key:0},S(a.notifications,u=>(n(),p(G(u.component?u.component:"core-notification"),{key:u.slug,notification:u,ref_for:!0,ref:"notification",onDismissedNotification:e[0]||(e[0]=m=>t.$emit("dismissed-notification"))},null,40,["notification"]))),128)):_("",!0),a.notifications.length?_("",!0):(n(),c("div",Ye,[E(t.$slots,"no-notifications",{},()=>[s("div",Ke,[s("img",{alt:"Dannie the Detective",src:t.$getAssetUrl(i.dannieDetectiveImg)},null,8,We),s("div",xe,r(i.strings.greatScott),1),s("div",Xe,r(i.strings.noNewNotifications),1),a.dismissedCount?(n(),c("a",{key:0,href:"#",class:"dismiss",onClick:e[1]||(e[1]=$(u=>t.$emit("toggle-dismissed"),["stop","prevent"]))},r(i.strings.seeDismissed),1)):_("",!0)])])]))])}const Qe=b(je,[["render",Je]]);const Ze={setup(){const{strings:t}=ht();return{composableStrings:t}},components:{CoreNotificationCards:Qe,SvgClose:V},mixins:[X],data(){return{dismissed:!1,maxNotifications:Number.MAX_SAFE_INTEGER,currentPage:0,totalPages:1,strings:Q(this.composableStrings,{dismissedNotifications:this.$t.__("Dismissed Notifications",this.$td),dismissAll:this.$t.__("Dismiss All",this.$td)})}},watch:{showNotifications(t){t?(this.currentPage=0,this.setMaxNotifications(),this.addBodyClass()):this.removeBodyClass()},dismissed(){this.setMaxNotifications()},notifications(){this.setMaxNotifications()}},computed:{...D(["showNotifications"]),filteredNotifications(){return[...this.notifications].splice(this.currentPage===0?0:this.currentPage*this.maxNotifications,this.maxNotifications)},pages(){const t=[];for(let e=0;e<this.totalPages;e++)t.push({number:e+1});return t}},methods:{...L(["dismissNotifications"]),...j(["toggleNotifications"]),escapeListener(t){t.key==="Escape"&&this.showNotifications&&this.toggleNotifications()},addBodyClass(){document.body.classList.add("aioseo-show-notifications")},removeBodyClass(){document.body.classList.remove("aioseo-show-notifications")},documentClick(t){if(!this.showNotifications)return;const e=t&&t.target?t.target:null,a=document.querySelector("#wp-admin-bar-aioseo-notifications");if(a&&(a===e||a.contains(e)))return;const g=document.querySelector("#toplevel_page_aioseo .wp-first-item"),i=document.querySelector("#toplevel_page_aioseo .wp-first-item .aioseo-menu-notification-indicator");if(g&&g.contains(i)&&(g===e||g.contains(e)))return;const o=this.$refs["aioseo-notifications"];o&&(o===e||o.contains(e))||this.toggleNotifications()},notificationsLinkClick(t){t.preventDefault(),this.toggleNotifications()},processDismissAllNotifications(){const t=[];this.notifications.forEach(e=>{t.push(e.slug)}),this.dismissNotifications(t).then(()=>{this.setMaxNotifications()})},setMaxNotifications(){const t=this.currentPage;this.currentPage=0,this.totalPages=1,this.maxNotifications=Number.MAX_SAFE_INTEGER,this.$nextTick(async()=>{const e=[],a=document.querySelectorAll(".notification-menu .aioseo-notification");a&&a.forEach(i=>{let o=i.offsetHeight;const u=window.getComputedStyle?getComputedStyle(i,null):i.currentStyle,m=parseInt(u.marginTop)||0,h=parseInt(u.marginBottom)||0;o+=m+h,e.push(o)});const g=document.querySelector(".notification-menu .aioseo-notification-cards");if(g){let i=0,o=0;for(let u=0;u<e.length&&(o+=e[u],!(o>g.offsetHeight));u++)i++;this.maxNotifications=i||1,this.totalPages=Math.ceil(e.length/i)}this.currentPage=t>this.totalPages-1?this.totalPages-1:t})}},mounted(){document.addEventListener("keydown",this.escapeListener),document.addEventListener("click",this.documentClick);const t=document.querySelector("#wp-admin-bar-aioseo-notifications .ab-item");t&&t.addEventListener("click",this.notificationsLinkClick);const e=document.querySelector("#toplevel_page_aioseo .wp-first-item"),a=document.querySelector("#toplevel_page_aioseo .wp-first-item .aioseo-menu-notification-indicator");e&&a&&e.addEventListener("click",this.notificationsLinkClick)}},ts={class:"aioseo-notifications",ref:"aioseo-notifications"},es={key:0,class:"notification-menu"},ss={class:"notification-header"},is={class:"new-notifications"},os={class:"dismissed-notifications"},ns={class:"notification-footer"},as={class:"pagination"},rs=["onClick"],cs={key:0,class:"dismiss-all"};function ls(t,e,a,g,i,o){const u=d("svg-close"),m=d("core-notification-cards");return n(),c("div",ts,[l(z,{name:"notifications-slide"},{default:f(()=>[t.showNotifications?(n(),c("div",es,[s("div",ss,[s("span",is,"("+r(t.notificationsCount)+") "+r(t.notificationTitle),1),s("div",os,[!i.dismissed&&t.dismissedNotificationsCount?(n(),c("a",{key:0,href:"#",onClick:e[0]||(e[0]=$(h=>i.dismissed=!0,["stop","prevent"]))},r(i.strings.dismissedNotifications),1)):_("",!0),i.dismissed&&t.dismissedNotificationsCount?(n(),c("a",{key:1,href:"#",onClick:e[1]||(e[1]=$(h=>i.dismissed=!1,["stop","prevent"]))},r(i.strings.activeNotifications),1)):_("",!0)]),s("div",{onClick:e[2]||(e[2]=$((...h)=>t.toggleNotifications&&t.toggleNotifications(...h),["stop"]))},[l(u)])]),l(m,{class:"notification-cards",notifications:o.filteredNotifications,dismissedCount:t.dismissedNotificationsCount,onToggleDismissed:e[3]||(e[3]=h=>i.dismissed=!i.dismissed)},null,8,["notifications","dismissedCount"]),s("div",ns,[s("div",as,[i.totalPages>1?(n(!0),c(w,{key:0},S(o.pages,(h,v)=>(n(),c("div",{class:P(["page-number",{active:h.number===1+i.currentPage}]),key:v,onClick:T=>i.currentPage=h.number-1},r(h.number),11,rs))),128)):_("",!0)]),i.dismissed?_("",!0):(n(),c("div",cs,[t.notifications.length?(n(),c("a",{key:0,href:"#",class:"dismiss",onClick:e[4]||(e[4]=$((...h)=>o.processDismissAllNotifications&&o.processDismissAllNotifications(...h),["stop","prevent"]))},r(i.strings.dismissAll),1)):_("",!0)]))])])):_("",!0)]),_:1}),l(z,{name:"notifications-fade"},{default:f(()=>[t.showNotifications?(n(),c("div",{key:0,onClick:e[5]||(e[5]=(...h)=>t.toggleNotifications&&t.toggleNotifications(...h)),class:"overlay"})):_("",!0)]),_:1})],512)}const ds=b(Ze,[["render",ls]]),us={components:{CoreHeader:Z,CoreHelp:le,CoreMainTabs:ct,CoreNotifications:ds,GridContainer:tt},mixins:[J],props:{pageName:{type:String,required:!0},showTabs:{type:Boolean,default(){return!0}},showSaveButton:{type:Boolean,default(){return!0}},excludeTabs:{type:Array,default(){return[]}},containerClasses:{type:Array,default(){return[]}}},data(){return{tabsKey:0,strings:{saveChanges:this.$t.__("Save Changes",this.$td)}}},watch:{excludeTabs(){this.tabsKey+=1}},computed:{...q(["settings"]),...D(["loading","options","showNotifications","helpPanel","notifications"]),tabs(){return this.$router.options.routes.filter(t=>t.name&&t.meta&&t.meta.name).filter(t=>this.$allowed(t.meta.access)).filter(t=>!t.meta.license||this.$license.hasMinimumLevel(this.$aioseo,t.meta.license)).filter(t=>!(t.meta.display==="lite"&&this.$isPro||t.meta.display==="pro"&&!this.$isPro)).filter(t=>!this.excludeTabs.includes(t.name)).map(t=>({slug:t.name,name:t.meta.name,url:{name:t.name},access:t.meta.access,pro:!!t.meta.pro}))},shouldShowSaveButton(){if(this.$route&&this.$route.name){const t=this.$router.options.routes.find(e=>e.name===this.$route.name);if(t&&t.meta&&t.meta.hideSaveButton)return!1}return this.showSaveButton}},methods:{...j(["toggleNotifications","disableForceShowNotifications"])},mounted(){W().notifications&&(this.showNotifications||this.toggleNotifications(),setTimeout(()=>{x("notifications")},500)),this.notifications.force&&this.notifications.active.length&&(this.disableForceShowNotifications(),this.toggleNotifications())}},_s={class:"aioseo-main"},hs={key:1,class:"save-changes"};function fs(t,e,a,g,i,o){const u=d("core-notifications"),m=d("core-header"),h=d("core-main-tabs"),v=d("base-button"),T=d("grid-container"),I=d("core-help");return n(),c("div",null,[l(u),s("div",_s,[l(m,{"page-name":a.pageName},null,8,["page-name"]),l(T,{class:P(a.containerClasses)},{default:f(()=>[a.showTabs?(n(),p(h,{key:i.tabsKey,tabs:o.tabs,showSaveButton:o.shouldShowSaveButton},{extra:f(()=>[E(t.$slots,"extra")]),_:3},8,["tabs","showSaveButton"])):_("",!0),l(z,{name:"route-fade",mode:"out-in"},{default:f(()=>[E(t.$slots,"default")]),_:3}),o.shouldShowSaveButton?(n(),c("div",hs,[l(v,{type:"blue",size:"medium",loading:t.loading,onClick:t.processSaveChanges},{default:f(()=>[y(r(i.strings.saveChanges),1)]),_:1},8,["loading","onClick"])])):_("",!0)]),_:3},8,["class"])]),t.helpPanel.docs&&Object.keys(t.helpPanel.docs).length?(n(),p(I,{key:0})):_("",!0)])}const Hs=b(us,[["render",fs]]);export{Hs as C,Qe as a,ht as u};
